// 주문 가짓수 구하기
function solution(orders) {
    var answer = [];

    var orderMap = orders.reduce((acc, cur) => {
        var items = cur.split(' ');
        var name = items[0];
        acc[name] ? null : acc[name] = {};
        for(var i=1; i<items.length; ++i){
            acc[name][items[i]] = items[i];
        };

        return acc;
    }, {});

    var resultMap = {};
    var maxOrder = 0;
    for(var name in orderMap){
        var orderLength = Object.keys(orderMap[name]).length;
        resultMap[name] = orderLength;
        if(maxOrder < orderLength){
            maxOrder = orderLength;
        };
    };
    
    for(var name in resultMap){
        if(resultMap[name] === maxOrder){
            answer.push(name);
        }
    }

    answer.sort();

    return answer;
}

// 트리 경로 구하기
function reculsive(arr, text, relation, dirname){
    for(var i=0; i<relation.length; ++i){
        if(arr[1] === relation[i][0]){
            var curText = text + '/' + dirname[relation[i][1]-1];
            result = reculsive(relation[i], curText, relation.slice(i, relation.length), dirname);
        }
    }

    return curText ? curText : '';
}

function solution(N, relation, dirname) {
    var answer = 0;
    var resultArr = [];
    relation.sort()
    var relationLegth = relation.length;
    for(var i=0; i<relationLegth; ++i){
        var text = relation[i].reduce((acc, cur, j) => {
            if(j===0){
                acc += dirname[cur-1];
            } else {
                acc += '/' + dirname[cur-1];
            }
            return acc;
        }, '');
        var mergedText = reculsive(relation[i], text, relation.slice(i, relationLegth), dirname);
        resultArr.push(mergedText);
    };

    let eachLength = resultArr.map(x => x.length);
    let maxNum = Math.max(...eachLength);

    answer = maxNum;
    return answer;
}
