---
layout: post
title: "자스민, 병민의 웹팩 최적화 Part1(10분 테코톡)"
subtitle: ""
comments: true
categories : Node
date: 2022-10-11
background: '/img/posts/06.jpg'
---

# 소개
우아한형제들의 유투브 채널인 `우아한Tech`에 올라온 웹팩 최적화에 관한 영상을 바탕으로 글을 작성합니다.
16:23초의 영상입니다.
목차는 아래와 같습니다.
```
1. 웹팩이란?
2. 웹팩의 기본 옵션
3. 웹팩의 최적화
4. 번들 용량 줄이기
  - webpack mode
  - source-map
  - 코드 스플리팅
  - 트리 쉐이킹
5. 빌드 속도 올리기
  - caching
```

## 1. 웹팩이란?
오픈 소스 자바스크립트 모듈 번들러로써 여러개로 나누어져 있는 파일들을 하나의 자바스크립트 코드로 압축하고 최적화 하는 라이브러리 입니다.
여기서 말하는 모듈 번들러는 웹 어플리케이션을 구성하는 자원(HTML, CSS, js, image 등)을 모두 각각의 모듈로 보고,
이를 조합해서 병합된 하나의 결과물을 만드는 도구 입니다.

### 1-1. 웹팩 이전의 모듈
기존에는 단순히 자바스크립트 파일을 분리하여 모듈을 분리하려했습니다.
하지만 이는 불필요한 파일 로딩에 대한 비용을 지불하거나 전역에 선언된 같은 변수가 생길 수 있는 등의 문제를 가지고 있습니다.
이런 문제를 해결하기 위해 즉시실행함수를 이용해 스코프를 제한 하거나 CommonJs와 같은 별도의 라이브러리를 사용하기도 했습니다.
물론 이는 완전한 대안이 되기 어렵습니다.
개발자의 개발에 대한 부담을 증가 시키거나 브라우저 호환성 문제와 같은 2차적인 문제들이 생겨나게됐습니다.
따라서 개발자들은 다른 방법을 찾았습니다.

### 1-2. 웹팩이 필요한 이유
웹팩은 기존의 단점을 거의 완벽히 보완합니다.
스코프를 분리해주고 호환성에 대한 문제를 해결하며 개발자는 자신이 하던대로 코드를 작성할 수 있습니다.
물론 웹팩 세팅을 위해 공부하고 시간을 들여야 하지만 장기적인 관점에서 이는 필요한 과정입니다.
수백 수천개의 컴포넌트를 파일로 관리하는 상상을 해보시면 웹팩과 같은 모듈 번들러가 왜 필요한지 느끼실 수 있을 것 같습니다.

## 2. 웹팩의 기본 옵션
[웹팩 공식 홈페이지에서 핵심개념 ](https://webpack.kr/concepts){: target="_blank"}
으로 소개하는 내용에 대해서 알아보겠습니다.
공식 홈페이지의 내용을 직접 보시는 것도 좋을 것 같습니다.

- 

### 2-1. Entry
앱이 번들 처리를 시작하는 지점을 의미합니다.
보편적으로 index.js를 시작으로 import문을 따라서 빌드를 진행합니다.

### 2-2. Output
번들링된 결과물의 위치 및 파일이름을 지정합니다.
path, filename 이라는 옵션을 통해 위치 및 파일이름을 지정할 수 있습니다.
만약 이미지와 같은 외부 리소스를 로드할 때는 publicPath가 필요할 수 있습니다.
publicPath는 실제 웹 어플리케이션이 배포되는 주소에서 바로 접근할 수 있습니다.

### 2-3. Resolve
모듈을 해석하는 방식을 변경할 수 있습니다.
예를 들어 alias 옵션을 이용할시에는6특정 모듈의 별칭을 만들 수 있습니다.
일반적으로 가장 많이 사용되는 경우는 프로젝트 최상경로를 @, ~ 와 같이 설정해놓고 사용하는 것을 예로 들 수 있습니다.

### 2-4. Loader
기본적으로 웹팩은 js, json만 해석가능하지만 Loader를 사용하면 다른 포멧의 파일을 처리하고 이를 앱에서 사용하는 모듈로 변환할 수 있습니다.
예시는 다음과 같습니다.
- Css : style-loader, css-loader
- File : file-loader, raw-loader, url-loader
- Typescript : ts-loader
- Vue : vue-loader

### 2-5. Plugin
로더가 파일 단위로 작업을 수행한다면 Plugin은 주로 번들된 결과물에 추가적인 작업을 진행합니다.
정말 많이 사용되는 예시로는 `html-webpack-plugin`이 있습니다.
이 플러그인은 번들된 모듈들을 로드 하는 html을 생성해줍니다.
저희는 이 html 파일이 포함된 번들을 웹서버에 배포만 해주면 됩니다.

### 2-6. externals
출력 번들에서 의존성을 제외하는 방법을 제공합니다.
우리의 코드가 의존하고 있지만 빌드 과정에는 포함하지 않아도 되는 axios, jQuery 같은 써드 파티 라이브러리를 
빌드 프로세스에 포함되지 않도록 제외할 수 있습니다.
여기서 빌드 과정에서 제외 된다는 것은 빌드된 결과물에서 해당 라이브러리를 제외한다는 의미가 아닙니다.
axios와 같은 라이브러리는 이미 빌드된 결과물이기 때문에 또 빌드를 할 필요가 없기 때문에 빌드의 과정을 거치지 않도록 하겠다는 의미입니다.
제외의 의미를 혼동하지 않으시길 바랍니다.









---
## 참고
- [자스민, 병민의 웹책 최적화 Part1](https://m.youtube.com/watch?v=QXYWlqK2eHI){: target="_blank"}


{% if page.comments %}
<div id="post-disqus" class="container">
{% include disqus.html %}
</div>
{% endif %}
