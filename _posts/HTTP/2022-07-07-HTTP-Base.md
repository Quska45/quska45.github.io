---
layout: post
title: "http 기본"
subtitle: "나는 http를 잘 알고 있나?"
comments: true
categories : HTTP
date: 2022-07-07
background: '/img/posts/06.jpg'
---

# 소개
이직을 준비하면서 http에 대해서도 공부를 하게 됐습니다. 
내가 http의 기본적인 내용들을 얼마나 잘 알고 있는지 점검하는 시간을 가지려고 합니다.
이글 저글 참고 하기 보다는 `캡틴 판교`님의 글 하나만 참고 하여 정리합니다.
그대로 복붙하는 것은 아니고 자문 자답 형식으로 작성 합니다.

## http 프로토콜이란?
HTTP(Hypertext Transfer Protocol)은 데이터를 주고 받기 위한 약속인 프로토콜의 한 종류 입니다. Application Layer에 해당하는 프로토콜입니다.

## http 프로토콜 특징
상태가 없는(stateless) 프로토콜입니다. 상태가 없다는 것은 데이터를 주고 받을 때 요청 끼리의 상관관계가 없다는 것을 의미합니다. 요청을 보내고 응답을 받으면 끝나는 것이죠. 
이런 특징은 다음고 같은 이점을 줍니다.
 - 세션과 같은 별도의 추가 정보를 관리하지 않아도 됩니다.
 - 다수의 요청 처리 및 서버의 부하를 줄일 수 있는 성능 상의 이점이 있습니다.
기본 포트는 80번을 사용합니다.

## http request & http response
![req res](https://joshua1988.github.io/images/posts/web/http/request-response.png){: width="500" height="500"}
<br>
request(요청)과 response(응답)은 위와 같습니다. 
<br> 
위에서 눈여겨 볼 점은 브라우저와 서버간의 상호 작용입니다. request를 보내는 주체는 브라우저이고 response를 보내는 주체는 서버 입니다. 우리가 네이버를 사용 할 수 있는 건 브라우저가 네이버 서버로 요청을 보내고 네이버 서버는 브라우저로 html 파일을 보내 줬기 때문이죠. 웹 개발 이라는 것은 결국에 요청과 응답을 잘 하는 게 아닐까 라는 생각이 드네요.

## URL
서버에 요청을 보내기 위해 사용하는 주소 입니다. URL을 통해 서버에 요청을 보낼 때는 몇 가지 정보를 같이 보내서 어떤 서버에 요청을 보내는지, 서버에서 어떤 응답을 보낼지 판단할 수 있는 추가 적인 정보 등이 있습니다. URL의 구조는 아래와 같습니다.
![URL 구조](https://joshua1988.github.io/images/posts/web/http/url-str{: width="500" height="500"}{: width="500" height="500"}{: width="500" height="500"}

## http 요청 메서드
http 요청을 보낼 때 용도에 따라 다른 메서드를 사용 할 수 있습니다. 메서드만 보고도 브라우저가 어떤 용도의 요청을 보내는지 판단 할 수도 있습니다.
  - GET : 서버에 존재 하는 자원에 대한 요청. 리소스는 html, json, image 등을 가리킵니다.
  - POST : 새로운 자원을 생성. 실제로 POST 요청이 자원을 생성한다는 것은 아닙니다. `생성을 위한 요청`을 하는 것 입니다.
  - PUT : 존재하는 자원에 대한 변경. POST와 유사합니다. 실제로 자원을 변경하는 것은 아닙니다.
  - DELETE : 존재하는 자원에 대한 삭제. POST, PUT과 유사 합니다.
<br>
각 요청은 요청 일 뿐 실제로 요청, 생성, 변경, 삭제에 대한 기능을 수행하는 것은 아닙니다. 실제로 GET으로 삭제를 수행할 수도 있고 POST로 요청을 할 수도 있습니다. 다만 이렇게 만들어진 어플리케이션을 잘 만들어 졌다고 할 수는 없겠죠. 안타깝게도 제가 경험한 몇 SI 프로젝트는 이런 메서드의 용도를 잘 지키고 있지 않았습니다. 물론 각 메서드 마다 분명한 차이점이 존재 합니다. 추가로 공부해보세요.

추가로 기타 요청 메서드가 있습니다. 다음과 같습니다.
 - HEAD : 서버 헤더 정보를 획득. GET과 비슷하나 Response Body를 반환하지 않음
 - OPTIONS : 서버 옵션들을 확인하기 위한 요청. `CORS`에서 사용.
<br>
이 글에서 다루지는 않겠지만 CORS에 대한 내용은 꼭 한 번 점검 하시기 바랍니다.

## HTTP 상태 코드
메서드가 클라이언트에서 요청 시 설정하는 정보라면 상태 코드는 서버에서 설정해주는 응답 정보 입니다. 클라이언트는 이 상태 코드를 받아서 에러 처리를 위한 로직을 작성해야 합니다.
상태코드는 여러가지가 있습니다. 하나 씩 알아봅시다.

### 2xx - 성공
200 번대의 상태코드는 대부분 성공을 의미합니다.
 - 200 : GET 요청에 대한 성공
 - 204 : No Content. 성공했으나 응답 본문에 데이터가 없음
 - 205 : Reset Content. 성공했으나 클라이언트의 화면을 새로 고침하도록 권고
 - 206 : Partial Content. 성공했으나 일부 범위의 데이터만 반환
 
### 3xx - 리다이렉션
300 번대의 상태 코드는 대부분 클라이언트가 이전 주소로 데이터를 요청하여 서버에서 새 URL로 리다이렉트를 유도하는 경우입니다.
 - 301 : Moved Permanently, 요청한 자원이 새 URL에 존재
 - 303 : See Other, 요청한 자원이 임시 주소에 존재
 - 304 : Not Modified, 요청한 자원이 변경되지 않았으므로 클라이언트에서 캐싱된 자원을 사용하도록 권고. ETag와 같은 정보를 활용하여 변경 여부를 확인
 
### 4xx - 클라이언트 에러
400번대 상태 코드는 대부분 클라이언트의 코드가 잘못된 경우 입니다. 유효하지 않은 자원을 요청했거나 권한이 잘못된 경우 발생합니다. 가장 익숙한 상태 코드는 404코드 입니다. 요청한 자원이 서버에 없다는 의미 입니다.
 - 400 : Bad Request, 잘못된 요청
 - 401 : Unauthorized, 권한 없이 요청. Authorization 헤더가 잘못된 경우
 - 403 : Forbidden, 서버에 해당 자원에 대해 접근 금지
 - 405 : Method Not Allowed, 허용되지 않은 요청 메서드
 - 409 : Conflict, 최신 자원이 아닌데 업데이트 하는 경우. ex) 파일 업로드 시 버전 충돌
 
 ### 5xx - 서버 에러
 500번대 상태 코드는 서버 쪽에서 오류가 난 경우입니다.
  - 501 : Not Inplemented, 요청한 동작에 대해 서버가 수행 할 수 없는 경우
  - 503 : Service Unavailable, 서버가 과부하 또는 유지 보수로 내려간 경우
 <br>
 메서드와 마찬가지로 상태 코드 또한 절대적인 기준은 아닙니다. 예를 들어 GET 메서드로 자원을 요청했을 때 실제로 서버는 자원을 가지고 있지만 그냥 404 상태를 응답하도록 개발할 수도 있습니다. 하지만 이렇게 개발을 하는 경우 개발자 프런트와 백엔드 개발자간의 혼란을 만들어 낼 수 있으니 실제 상태에 맞는 상태를 반드시 응답해주도록 개발 해줘야 합니다.
 
 ## 마무리
 http에 대해 기본적인 내용들을 알아봤습니다. 이는 아주 기초적인 수준입니다. 더 심화된 내용들에 공부 해보시기 바랍니다.



## 참고
- [프런트엔드 개발자가 알아야하는 HTTP 프로토콜 Part 1](https://joshua1988.github.io/web-development/http-part1/)
--- 

{% highlight ruby linenos %}
{% endhighlight %}

{% if page.comments %}
<div id="post-disqus" class="container">
{% include disqus.html %}
</div>
{% endif %}
