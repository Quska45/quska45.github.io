---
layout: post
title: "TCP/IP 쉽게 이해하기"
subtitle: ""
comments: true
categories : HTTP
date: 2022-07-13
background: '/img/posts/06.jpg'
---

# 소개
Network 관련해서 이런 저런 내용을 공부하다 환영님 블로그를 발견했습니다. 이 글은 환영님의 글을 바탕으로 개인적인 공부를 위해 작성합니다.
TCP/IP는 OSI 7 Layer에서 Layer4(TCP), Layer3(IP)를 다루는 프로토콜이라는 것을 말씀드립니다.

## TCP/IP
```
인터넷 프로토콜 스위트(영어: Internet Protocol Suite)는 인터넷에서 컴퓨터들이 서로 정보를 주고받는 데 쓰이는 통신규약(프로토콜)의 모음이다. 인터넷 프로토콜 슈트 중 TCP와 IP가 가장 많이 쓰이기 때문에 TCP/IP 프로토콜 슈트라고도 불린다.

TCP/IP는 패킷 통신 방식의 인터넷 프로토콜인 IP와 전송 조절 프로토콜인 TCP로 이루어져 있다. IP는 패킷 전달 여부를 보증하지 않고, 패킷을 보낸 순서와 받는 순서가 다를 수 있다. TCP는 IP 위에서 동작하는 프로토콜로, 데이터의 전달을 보증하고 보낸 순서대로 받게 해 준다. HTTP, FTP, SMTP 등 TCP를 기반으로 한 많은 수의 애플리케이션 프로토콜들이 IP 위에서 동작하기 때문에, 묶어서 TCP/IP로 부르기도 한다.

- 출처 : 위키백과 -
```
TCP와 IP라는 별개의 프로토콜을 TCP/IP라고 묶어서 부릅니다. 서로의 시너지가 매우 좋기 때문입니다.
TCP/IP를 사용하게 되면 IP 주소 체계에 따라 IP Routing을 이용해 목적지에 도달하며 TCP의 특성을 활용해 송신자와 수신자의 논리적 연결을 생성하고 신뢰성을 유지 할 수 있습니다.
더 풀어서 얘기하면, 송신자가 수신자에게 IP 주소를 사용하여 데이터를 전달하고 그 데이터가 제대로 갔는지, 너무 빠르지는 않는지, 제대로 받았다고 연락은 오는지 같은 것들을 확인 할 수 있도록 합니다.
<br>
```
Transport Layer(Layer 4)
송신자와 수신자의 논리적 연결을 담당하며, 신회성 있는 연결을 유지할 수 있도록 도와줍니다.
즉 Endpoint(사용자) 간의 연결을 생성하고 데이터를 얼마나 보냈고 얼마나 받았는지, 제대로 받았는지 등을 확인합니다. 
TCP, UDP가 이 계층에 속합니다.

Network Layer(Layer 3)
IP(Internet Protocol)이 활용되는 부분으로, 한 Endpoint가 다른 Endpoint로 가고자 할 경우, 경로와 목적지를 찾아줍니다.
이를 Routing이라고 합니다.
대역이 다른 IP들이 목적지를 향해 제대로 찾아갈 수 있도록 돕는 역할을 합니다.
```
![TCP/IP를 사용하는 브라우저와 서버의 통신](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2FbsTP2r%2FbtqD3Iafw4j%2Fqsix7eLCZSfHq5uvQosvZK%2Fimg.png){: width=500; height=500;}
우리가 인터넷을 사용하면서 데이터를 빠짐없이 받을 수 있는 이유는 위의 설명과 그림처럼 TCP가 확인을 하기 때문입니다.
그래서 HTTP, HTTPS, FTP, SMTP 등과 같이 데이터를 안정적으로 모두 보내는 것을 중요시하는 프로토콜들이 TCP위에서 작동합니다.
이런 꼼꼼한 통신이 가능한 이유는 TCP의 '3-way-handshake'를 거친 후 각 프로토콜별로(7 Layer) 교환 과정을 실시하기 때문입니다.
![HTTPS 통신과정](https://blog.kakaocdn.net/dn/oWGLi/btqD6PZ1oOO/JNhHMJPw2ShsHAQwHzVtoK/img.png){: width=500; height=350;}
위 이미지는 TCP기반의 프로토콜인 HTTPS의 'SSL handshake'를 도식화한 것 입니다. TCP는 Layer4이고 HTTPS는 Layer 7입니다. 정확히 얘기 하면 Layer 7에 ssl이라는 프로토콜이 추가된 것이지만 HTTPS에 대해서 정확히 모르신다면 Layer 7으로 이해하셔도 무방한 것 같습니다. 파란색 상자는 TCP의 '3-way handshake'이고 노란색 상자는 HTTPS의 'ssl handshake'입니다. HTTPS는 TCP 기반의 프로토콜이기 때문에 ssl handshake를 하기에 앞서 3-way handshake를 실시함을 알 수 있습니다. 다른 프로토콜도 TCP에 기반한다면 위와 같은 과정을 반드시 거친다는 것을 알 수 있습니다. 이제 TCP에 대해서 자세히 알아보도록 하겠습니다.

## TCP의 개요
```
전송 프로토콜(TCP)은 인터넷 프로토콜 수트의 핵심 프로토콜 중 하나로, IP와 함께 TCP/IP라는 명칭으로도 널리 불립니다. TCP는 근거리 통신망이나 인트라넷, 인터넷에 연결된 컴퓨터에서 실행되는 프로그램간의 일련의 통신을 안정적, 순서대로 교환할 수 있게 합니다.
전송 프로토콜은 네트워크의 정보 전달을 통제하는 프로토콜이자 인터넷을 이루는 핵심 프로톨의 하나입니다. TCP는 웹 브라우저들이 월드 와이드 웹에서 서버에 연결할 떄 사용되며, 이메일 전송이나 파일 전송에도 사용됩니다.
```
IP는 패킷들의 관계를 이해하지 못하지만 목적지를 제대로 찾아가는 것에 중점을 둡니다.
TCP는 통신하려는 양쪽 단말(endpoint)이 통신할 준비가 됐는지, 데이터가 제대로 전송됐는지, 데이터가 가는 도중 변질되지 않았는지, 수신자가 받지 못한 데이터가 없진 않은지 확인합니다.
이런 서로의 특성 때문에 TCP와 IP의 궁합이 좋은 것 입니다.
TCP가 본인의 역할을 수행하기 위한 정보는 tcp header에 담겨 있습니다. HTTP 처럼 TCP도 프로토콜의 종류일 뿐이고 비슷한 원리와 구조로 역할을 수행한다는 것을 알 수 있습니다.
추가적으로 TCP가 실을 수 있는 데이터의 크기를 `세그먼트(segment)`라고 부릅니다.
![tcp헤더의 구조](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fk.kakaocdn.net%2Fdn%2Fd6mnUJ%2FbtqEaZbmUNJ%2FIEMEVTzjDYZLk7tAsPuGl1%2Fimg.png)
<br>
TCP는 IP의 정보뿐만 아니라 Port를 이용하여 연결합니다.


## 참고
- [TCP/IP 쉽게 이해하기](https://aws-hyoh.tistory.com/57)
- [크롬 주소창에 URL을 입력 후 화면 출력되는 과정](https://junshock5.tistory.com/143)

--- 

{% highlight ruby linenos %}
{% endhighlight %}

{% if page.comments %}
<div id="post-disqus" class="container">
{% include disqus.html %}
</div>
{% endif %}
